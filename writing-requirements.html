<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Writing Requirements &mdash; DOML Model Checker 2.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Built-in Requirements" href="requirements.html" />
    <link rel="prev" title="Usage" href="usage.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> DOML Model Checker
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Writing Requirements</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#syntax">Syntax</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#operator-precedence">Operator Precedence</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#grammar">Grammar</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Built-in Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="restapis.html">REST APIs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DOML Model Checker</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Writing Requirements</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/writing-requirements.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="writing-requirements">
<h1>Writing Requirements<a class="headerlink" href="#writing-requirements" title="Permalink to this heading"></a></h1>
<p>A feature of the DOML Model Checker is a Domain Specific Language (DSL)
called <strong>DOMLR</strong>.</p>
<p>It will be integrated in the DOML in a future release.
For now, it can be provided to the Model Checker through the CLI.</p>
<section id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading"></a></h2>
<p>First, create a new file with a <code class="docutils literal notranslate"><span class="pre">.domlr</span></code> extension.</p>
<p>If you use VS Code, there’s an <a class="reference external" href="https://marketplace.visualstudio.com/items?itemName=andreafra.piacere-domlr">Syntax Highlight</a> extension for it.</p>
<p>Every user requirement file is a list of requirement:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span> <span class="s2">&quot;All VMs have iface&quot;</span>
<span class="n">forall</span> <span class="n">vm</span> <span class="p">(</span>
    <span class="n">vm</span> <span class="ow">is</span> <span class="k">class</span> <span class="nc">abstract</span><span class="o">.</span><span class="n">VirtualMachine</span>
    <span class="n">implies</span>
    <span class="n">exists</span> <span class="n">iface</span> <span class="p">(</span>
        <span class="n">vm</span> <span class="n">has</span> <span class="n">abstract</span><span class="o">.</span><span class="n">ComputingNode</span><span class="o">.</span><span class="n">ifaces</span> <span class="n">iface</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="o">---</span>
<span class="s2">&quot;A vm does not have an associated interface&quot;</span>
</pre></div>
</div>
<p>The language is <em>case-sensitive</em> but it’s not indentation-based, so you are free to write it as you prefer.</p>
<ol class="arabic">
<li><p>A requirement must <strong>start</strong> with a <code class="docutils literal notranslate"><span class="pre">+</span></code> or <code class="docutils literal notranslate"><span class="pre">-</span></code> character.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">+</span></code> means that the requirement is in <em>positive form</em>: the requirement is satisfied when its
logic expression is satisfied.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-</span></code> means that the requirement is in <em>negative form</em>: the requirement is satisfied when its
logic expression <strong>is not</strong> satisfied.</p></li>
</ul>
<p>The difference is that in <em>positive form</em> you’ll generally use a <em>for all</em> quantifier at the beginning,
which doesn’t allow you to know which specific element didn’t satisfy the requirement, while in <em>negative form</em>
you’ll have some variables that are not quantified, meaning that it’s usually possible to retrieve the names of the
elements associated to those variables that do not satisfy the requirement.</p>
</li>
<li><p>After the <code class="docutils literal notranslate"><span class="pre">+</span></code> or <code class="docutils literal notranslate"><span class="pre">-</span></code> there’s the <strong>name</strong> of the requirement, which is a string between double quotes <code class="docutils literal notranslate"><span class="pre">&quot;...&quot;</span></code>.
They must be <em>double quotes</em>, single quotes <code class="docutils literal notranslate"><span class="pre">'...'</span></code> won’t work.</p></li>
<li><p>Following the requirement name, there’s the <strong>logic expression</strong> which is the core of the requirement.
It is written in <a class="reference external" href="https://en.wikipedia.org/wiki/First-order_logic">First Order Logic</a>, so it will evaluate to either true or false. See the <a class="reference internal" href="#syntax">Syntax</a> for details.</p></li>
<li><p>Last, delimited by <code class="docutils literal notranslate"><span class="pre">---</span></code>, there is the <strong>error message</strong> that is printed when the requirement is not satisfied.
If you have a free variable, which means a variable that is not quantified, you can print its value by putting it in the
string between curly brackets like this: <code class="docutils literal notranslate"><span class="pre">{myVar}</span></code>. It may not always work.</p></li>
</ol>
</section>
<section id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this heading"></a></h2>
<blockquote>
<div><p>The syntax is the following:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Unary operators: <code class="docutils literal notranslate"><span class="pre">not</span></code></dt><dd><ul>
<li><p>Example: <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">&lt;expression&gt;</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Binary operators: <code class="docutils literal notranslate"><span class="pre">or</span></code>, <code class="docutils literal notranslate"><span class="pre">and</span></code>, <code class="docutils literal notranslate"><span class="pre">implies</span></code>, <code class="docutils literal notranslate"><span class="pre">iff</span></code> (if and only if, AKA double implication)</dt><dd><ul>
<li><p>Example: <code class="docutils literal notranslate"><span class="pre">&lt;expression&gt;</span> <span class="pre">and</span> <span class="pre">&lt;expression&gt;</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Quantifiers: <code class="docutils literal notranslate"><span class="pre">forall</span></code>, <code class="docutils literal notranslate"><span class="pre">exists</span></code></dt><dd><ul>
<li><p>Example: <code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">x,</span> <span class="pre">y</span> <span class="pre">(</span> <span class="pre">&lt;expression&gt;</span> <span class="pre">)</span></code></p></li>
<li><p>After the quantifier keywork (<code class="docutils literal notranslate"><span class="pre">forall</span></code>, <code class="docutils literal notranslate"><span class="pre">exists</span></code>) you must specify a list of quantified variables
(separated by a comma <code class="docutils literal notranslate"><span class="pre">,</span></code> if there’s more than one)</p></li>
<li><p>Between the mandatory pair of parenthesis, you’ll be able to use the quantified variables in a logic expression.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Parenthesis: <code class="docutils literal notranslate"><span class="pre">(</span></code> … <code class="docutils literal notranslate"><span class="pre">)</span></code></dt><dd><ul>
<li><p>Useful when you have doubts about the precedence of operators, or want to increase legibility in certain situations.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Elements (variables):</dt><dd><ul>
<li><p>Begin with a lowercase letter.</p></li>
<li><p>Example: <code class="docutils literal notranslate"><span class="pre">virtualMachine</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Values (variables):</dt><dd><ul>
<li><p>Begin with an uppercase letter.</p></li>
<li><p>Example: <code class="docutils literal notranslate"><span class="pre">CpuCores</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Values (constants):</dt><dd><ul>
<li><p>Strings are delimited by double quotes <code class="docutils literal notranslate"><span class="pre">&quot;...&quot;</span></code></p></li>
<li><p>Numbers are integers</p></li>
<li><p>Booleans are either <code class="docutils literal notranslate"><span class="pre">!True</span></code> or <code class="docutils literal notranslate"><span class="pre">!False</span></code></p></li>
<li><p>Example: <code class="docutils literal notranslate"><span class="pre">56</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;linux&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">!False</span></code>, <code class="docutils literal notranslate"><span class="pre">!False</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Relationships: <code class="docutils literal notranslate"><span class="pre">&lt;elem&gt;</span> <span class="pre">has</span> <span class="pre">&lt;relationship&gt;</span> <span class="pre">&lt;elem/value&gt;</span></code></dt><dd><ul>
<li><dl class="simple">
<dt>There are two types of relationships:</dt><dd><ul>
<li><p><em>Associations</em> are a relationship between two elements (variables).</p></li>
<li><p><em>Attributes</em> are a relationship between an element (variable) and a value (variable or constant)</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Relationships follow this naming structure <code class="docutils literal notranslate"><span class="pre">&lt;package&gt;.&lt;class&gt;.&lt;relationship&gt;</span></code>.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Classes: <code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">&lt;class</span> <span class="pre">name&gt;</span></code></dt><dd><ul>
<li><p>They represent a kind of element in the architecture.</p></li>
<li><p>Classes follow this naming structure <code class="docutils literal notranslate"><span class="pre">&lt;package&gt;.&lt;class&gt;</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Equality: <code class="docutils literal notranslate"><span class="pre">is</span></code>, <code class="docutils literal notranslate"><span class="pre">is</span> <span class="pre">not</span></code></dt><dd><ul>
<li><p>Used to set an equality (or inequality) constraint on an element variable. You can compare elements and classes.
You can even compare classes between each other, but it’s kinda pointless.</p></li>
<li><p>Example: <code class="docutils literal notranslate"><span class="pre">vm</span> <span class="pre">is</span> <span class="pre">class</span> <span class="pre">abstract.VirtualMachine</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Comparisons: <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>,  <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>,  <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>,  <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>,  <code class="docutils literal notranslate"><span class="pre">==</span></code>,  <code class="docutils literal notranslate"><span class="pre">!=</span></code></dt><dd><ul>
<li><p>Used to compare two values between each other.</p></li>
<li><p>You can compare variables and constants alike.</p></li>
<li><p>Example: <code class="docutils literal notranslate"><span class="pre">CpuCores</span> <span class="pre">&gt;=</span> <span class="pre">4</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<section id="operator-precedence">
<h3>Operator Precedence<a class="headerlink" href="#operator-precedence" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">exists</span></code>/<code class="docutils literal notranslate"><span class="pre">forall</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">not</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">or</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">and</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">implies</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">iff</span></code></p>
</section>
</section>
<section id="grammar">
<h2>Grammar<a class="headerlink" href="#grammar" title="Permalink to this heading"></a></h2>
<p>See the <a class="reference external" href="https://github.com/andreafra/piacere-model-checker/blob/main/mc_openapi/doml_mc/dsl_parser/grammar.lark">grammar.lark</a> file on GitHub, it’s written in a EBNF-like form.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="usage.html" class="btn btn-neutral float-left" title="Usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="requirements.html" class="btn btn-neutral float-right" title="Built-in Requirements" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Michele Chiari, Michele De Pascalis, Andrea Franchini.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>